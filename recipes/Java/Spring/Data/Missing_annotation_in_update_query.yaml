id: scw:spring:data:query-modifying
version: 8
metadata:
  name: Missing annotation in update query
  shortDescription: This query is performing a write operation in the database, therefore
    you should annotate it with @Modifying annation.
  level: error
  language: java
  enabled: true
  tags: framework-specific;spring-data;quality
search:
  method:
    annotation:
      type: org.springframework.data.jpa.repository.Query
      parameters:
      - value:
          value:
            matches: (UPDATE|DELETE|INSERT).*
    without:
      annotation:
        type: org.springframework.data.jpa.repository.Modifying
availableFixes:
- name: Annotate with @Modifying
  actions:
  - addAnnotation:
      annotation: '@org.springframework.data.jpa.repository.Modifying'
