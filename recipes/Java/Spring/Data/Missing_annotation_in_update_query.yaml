id: scw:spring:data:query-modifying
version: 8
metadata:
  name: Missing annotation in update query
  shortDescription: Queries performing write operations should have the @Modifying
    annotation.
  level: error
  language: java
  enabled: true
  tags: spring;framework-specific;spring-data;quality
search:
  method:
    annotation:
      type: org.springframework.data.jpa.repository.Query
      parameters:
      - value:
          value:
            anyOf:
            - contains: INSERT
              caseSensitive: false
            - contains: DELETE
              caseSensitive: false
            - contains: UPDATE
              caseSensitive: false
    without:
      annotation:
        type: org.springframework.data.jpa.repository.Modifying
availableFixes:
- name: Annotate with @Modifying
  actions:
  - addAnnotation:
      annotation: '@org.springframework.data.jpa.repository.Modifying'
