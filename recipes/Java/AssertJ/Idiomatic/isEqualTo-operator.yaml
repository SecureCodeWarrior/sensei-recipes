id: scw:assertj:idiomatic:isEqualTo-operator
version: 10
metadata:
  name: Use isEqualTo instead of ==
  shortDescription: Use isEqualTo instead of ==
  level: warning
  language: java
  enabled: true
  tags: AssertJ;framework specific;quality
search:
  methodcall:
    args:
      1:
        value:
          is:
            comparison:
              operator: ==
    name: assertThat
    anyOf:
    - followedBy:
        methodcall:
          followedBy:
            methodcall:
              name: isTrue
              label: isTrueMethodCallIndirect
          name:
            matches: as|describedAs
    - followedBy:
        methodcall:
          name: isTrue
          label: isTrueMethodCallDirect
    type: org.assertj.core.api.Assertions
availableFixes:
- name: Use idiomatic assertion
  actions:
  - modifyArguments:
      rewrite:
        1: '{{{ leftOperand }}}'
  - modifyArguments:
      insert:
        1: '{{{ qualifier.arguments.0.rightOperand }}}'
      target: label:isTrueMethodCallDirect
  - modifyArguments:
      insert:
        1: '{{{ qualifier.qualifier.arguments.0.rightOperand }}}'
      target: label:isTrueMethodCallIndirect
  - changeName:
      name: isEqualTo
      target: label:isTrueMethodCallDirect
  - changeName:
      name: isEqualTo
      target: label:isTrueMethodCallIndirect
